<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SpotiLove.Conversation"
             BackgroundColor="#121212">

    <Grid RowDefinitions="Auto,*,Auto">

        <!-- Header with User Info -->
        <Border Grid.Row="0" BackgroundColor="#1a1a1a" Padding="0">
            <Grid Padding="15,10" ColumnDefinitions="Auto,Auto,*,Auto">

                <!-- Back Button -->
                <Button
                    Grid.Column="0"
                    Text="←"
                    FontSize="24"
                    TextColor="White"
                    BackgroundColor="Transparent"
                    WidthRequest="40"
                    HeightRequest="40"
                    Clicked="OnBackClicked"/>

                <!-- Profile Picture -->
                <Border
                    Grid.Column="1"
                    StrokeShape="RoundRectangle 22"
                    Stroke="#1db954"
                    StrokeThickness="2"
                    BackgroundColor="#535353"
                    HeightRequest="44"
                    WidthRequest="44"
                    Margin="10,0,15,0"
                    VerticalOptions="Center">
                    <Image
                        x:Name="ProfileImage"
                        Aspect="AspectFill"/>
                </Border>

                <!-- Name and Status -->
                <VerticalStackLayout Grid.Column="2" VerticalOptions="Center" Spacing="2">
                    <Label
                        x:Name="UserNameLabel"
                        Text="User Name"
                        FontSize="16"
                        FontAttributes="Bold"
                        TextColor="White"/>
                    <Label
                        x:Name="StatusLabel"
                        Text="Online"
                        FontSize="12"
                        TextColor="#1db954"/>
                </VerticalStackLayout>

                <!-- More Options -->
                <Button
                    Grid.Column="3"
                    Text="⋮"
                    FontSize="24"
                    TextColor="White"
                    BackgroundColor="Transparent"
                    WidthRequest="40"
                    HeightRequest="40"
                    Clicked="OnMoreOptionsClicked"/>
            </Grid>
        </Border>

        <!-- Messages List -->
        <ScrollView Grid.Row="1" x:Name="MessagesScrollView" Padding="15">
            <VerticalStackLayout x:Name="MessagesContainer" Spacing="10">

                <!-- Messages will be dynamically added here -->

            </VerticalStackLayout>
        </ScrollView>

        <!-- Message Input Area -->
        <Border Grid.Row="2" BackgroundColor="#1a1a1a" Padding="15,10">
            <Grid ColumnDefinitions="Auto,*,Auto,Auto" ColumnSpacing="10">

                <!-- Attach Button -->
                <Button
                    Grid.Column="0"
                    Text="+"
                    FontSize="24"
                    TextColor="#1db954"
                    BackgroundColor="#212121"
                    WidthRequest="45"
                    HeightRequest="45"
                    CornerRadius="22"
                    Clicked="OnAttachClicked"/>

                <!-- Message Entry -->
                <Border
                    Grid.Column="1"
                    BackgroundColor="#212121"
                    Stroke="#535353"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 22"
                    Padding="5,0">
                    <Editor
                        x:Name="MessageEntry"
                        Placeholder="Type a message..."
                        PlaceholderColor="#b3b3b3"
                        TextColor="White"
                        BackgroundColor="Transparent"
                        HeightRequest="45"
                        VerticalOptions="Center"
                        MaximumHeightRequest="100"
                        AutoSize="TextChanges"/>
                </Border>

                <!-- Music Share Button -->
                <Button
                    Grid.Column="2"
                    Text="♪"
                    FontSize="20"
                    TextColor="#1db954"
                    BackgroundColor="#212121"
                    WidthRequest="45"
                    HeightRequest="45"
                    CornerRadius="22"
                    Clicked="OnShareMusicClicked"/>

                <!-- Send Button -->
                <Button
                    Grid.Column="3"
                    Text="➤"
                    FontSize="20"
                    TextColor="White"
                    BackgroundColor="#1db954"
                    WidthRequest="45"
                    HeightRequest="45"
                    CornerRadius="22"
                    Clicked="OnSendMessageClicked"/>
            </Grid>
        </Border>

    </Grid>
</ContentPage>